<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LABORO Chatbot - H·ªó tr·ª£ t·ª± ƒë·ªông</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Hiragino Kaku Gothic ProN', 'Hiragino Sans', Meiryo, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .chat-container {
            width: 100%;
            max-width: 500px;
            height: 90vh;
            max-height: 800px;
            background: white;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }

        .chat-header {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            padding: 20px;
            text-align: center;
            position: relative;
        }

        .chat-header h1 {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 5px;
        }

        .chat-header p {
            font-size: 12px;
            opacity: 0.9;
        }

        .command-buttons {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            justify-content: center;
        }

        .command-button {
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 6px 12px;
            color: white;
            font-size: 11px;
            cursor: pointer;
            backdrop-filter: blur(10px);
            transition: background 0.2s;
        }

        .command-button:hover {
            background: rgba(255, 255, 255, 0.3);
        }

        .language-selector {
            position: absolute;
            top: 15px;
            right: 15px;
            background: rgba(255, 255, 255, 0.2);
            border: 1px solid rgba(255, 255, 255, 0.3);
            border-radius: 8px;
            padding: 5px 10px;
            color: white;
            font-size: 12px;
            cursor: pointer;
            backdrop-filter: blur(10px);
        }

        .language-selector select {
            background: transparent;
            border: none;
            color: white;
            font-size: 12px;
            cursor: pointer;
            outline: none;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            background: #f5f7fa;
        }

        .message {
            margin-bottom: 15px;
            display: flex;
            animation: fadeIn 0.3s ease-in;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .message.user {
            justify-content: flex-end;
        }

        .message.bot {
            justify-content: flex-start;
        }

        .message-content {
            max-width: 75%;
            padding: 12px 16px;
            border-radius: 18px;
            word-wrap: break-word;
            line-height: 1.5;
        }

        .message.user .message-content {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message.bot .message-content {
            background: white;
            color: #333;
            border-bottom-left-radius: 4px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        /* „Ç´„Éº„Éâ„Éô„Éº„Çπ„ÅÆ„É°„Éã„É•„Éº */
        .menu-card {
            background: white;
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .menu-card h3 {
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #333;
        }

        .menu-item {
            display: flex;
            align-items: center;
            padding: 10px;
            margin-bottom: 8px;
            background: #f8f9fa;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .menu-item:hover {
            background: #e9ecef;
            transform: translateX(5px);
        }

        .menu-item-number {
            width: 30px;
            height: 30px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 600;
            margin-right: 12px;
            font-size: 14px;
        }

        .menu-item-text {
            flex: 1;
            font-size: 14px;
            color: #333;
        }

        .menu-navigation {
            display: flex;
            justify-content: space-between;
            margin-top: 15px;
            padding-top: 15px;
            border-top: 1px solid #e9ecef;
        }

        .nav-button {
            background: #f8f9fa;
            border: none;
            padding: 8px 16px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 12px;
            color: #667eea;
            transition: background 0.2s;
        }

        .nav-button:hover {
            background: #e9ecef;
        }

        .nav-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        /* „Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥ */
        .action-buttons {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-top: 15px;
        }

        .action-button {
            padding: 12px 16px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
            text-align: left;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .action-button.primary {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .action-button.secondary {
            background: #f8f9fa;
            color: #333;
            border: 1px solid #e9ecef;
        }

        .action-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .action-button-icon {
            font-size: 18px;
        }

        /* „Éï„Ç©„Éº„É† */
        .form-container {
            background: white;
            border-radius: 12px;
            padding: 20px;
            margin-top: 15px;
        }

        .form-group {
            margin-bottom: 15px;
        }

        .form-label {
            display: block;
            margin-bottom: 5px;
            font-size: 14px;
            font-weight: 500;
            color: #333;
        }

        .form-input,
        .form-select {
            width: 100%;
            padding: 10px;
            border: 1px solid #e9ecef;
            border-radius: 8px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.2s;
        }

        .form-input:focus,
        .form-select:focus {
            border-color: #667eea;
        }

        .form-buttons {
            display: flex;
            gap: 10px;
            margin-top: 20px;
        }

        .form-button {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            cursor: pointer;
            transition: all 0.2s;
        }

        .form-button.submit {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
        }

        .form-button.cancel {
            background: #f8f9fa;
            color: #333;
        }

        .form-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        }

        .chat-input-container {
            padding: 15px 20px;
            background: white;
            border-top: 1px solid #e0e0e0;
        }

        .chat-input-wrapper {
            display: flex;
            gap: 10px;
            align-items: center;
        }

        .chat-input {
            flex: 1;
            padding: 12px 16px;
            border: 2px solid #e0e0e0;
            border-radius: 25px;
            font-size: 14px;
            outline: none;
            transition: border-color 0.3s;
        }

        .chat-input:focus {
            border-color: #667eea;
        }

        .send-button {
            width: 45px;
            height: 45px;
            border: none;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border-radius: 50%;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s, box-shadow 0.2s;
            font-size: 18px;
        }

        .send-button:hover {
            transform: scale(1.05);
            box-shadow: 0 5px 15px rgba(102, 126, 234, 0.4);
        }

        .welcome-message {
            text-align: center;
            padding: 20px;
            color: #666;
            font-size: 14px;
            line-height: 1.8;
        }

        .welcome-message h2 {
            color: #333;
            margin-bottom: 15px;
            font-size: 18px;
        }

        .welcome-message ul {
            list-style: none;
            text-align: left;
            display: inline-block;
            margin-top: 10px;
        }

        .welcome-message li {
            margin-bottom: 8px;
        }

        .hidden {
            display: none;
        }

        /* „Çπ„ÇØ„É≠„Éº„É´„Éê„Éº„ÅÆ„Çπ„Çø„Ç§„É´ */
        .chat-messages::-webkit-scrollbar {
            width: 6px;
        }

        .chat-messages::-webkit-scrollbar-track {
            background: #f1f1f1;
        }

        .chat-messages::-webkit-scrollbar-thumb {
            background: #888;
            border-radius: 3px;
        }

        .chat-messages::-webkit-scrollbar-thumb:hover {
            background: #555;
        }

        /* „É¨„Çπ„Éù„É≥„Ç∑„ÉñÂØæÂøú */
        @media (max-width: 600px) {
            .chat-container {
                height: 100vh;
                max-height: none;
                border-radius: 0;
            }

            .message-content {
                max-width: 85%;
            }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <div class="language-selector">
                <select id="languageSelect">
                    <option value="vi">Ti·∫øng Vi·ªát</option>
                    <option value="ja">Êó•Êú¨Ë™û</option>
                    <option value="en">English</option>
                    <option value="ne">‡§®‡•á‡§™‡§æ‡§≤‡•Ä</option>
                </select>
            </div>
            <h1 id="headerTitle">LABORO Chatbot</h1>
            <p id="headerSubtitle">H·ªó tr·ª£ t·ª± ƒë·ªông</p>
            <div class="command-buttons">
                <button class="command-button" onclick="goHome()">üè° HOME</button>
                <button class="command-button" onclick="connectCoordinator()">üôãüèª‚Äç‚ôÄÔ∏è CSKH</button>
                <button class="command-button" onclick="showGuide()">üìã H∆Ø·ªöNG D·∫™N</button>
            </div>
        </div>
        
        <div class="chat-messages" id="chatMessages">
            <div class="welcome-message" id="welcomeMessage">
                <!-- „Ç¶„Çß„É´„Ç´„É†„É°„ÉÉ„Çª„Éº„Ç∏„ÅØJavaScript„ÅßÂãïÁöÑ„Å´Êõ¥Êñ∞ -->
            </div>
        </div>
        
        <div class="chat-input-container">
            <div class="chat-input-wrapper">
                <input type="text" class="chat-input" id="chatInput" placeholder="Nh·∫≠p c√¢u h·ªèi ho·∫∑c s·ªë menu..." />
                <button class="send-button" id="sendButton" onclick="handleInput()">‚û§</button>
            </div>
        </div>
    </div>

    <script>
        // Ë®ÄË™ûË®≠ÂÆö
        const languages = {
            vi: {
                title: "LABORO Chatbot",
                subtitle: "H·ªó tr·ª£ t·ª± ƒë·ªông",
                welcome: {
                    title: "Xin ch√†o!",
                    message: "B·∫°n ƒëang tr√≤ chuy·ªán v·ªõi t√≠nh nƒÉng robot h·ªó tr·ª£ t·ª± ƒë·ªông c·ªßa LABORO!",
                    services: [
                        "üí∞ L∆∞∆°ng v√† b·∫£ng l∆∞∆°ng",
                        "üõÇ Visa v√† th·∫ª c∆∞ tr√∫",
                        "üìÖ Ch·∫•m c√¥ng v√† ngh·ªâ l√†m",
                        "‚è∞ Ca l√†m vi·ªác",
                        "üíª H·ªá th·ªëng CMS"
                    ],
                    instruction: "Vui l√≤ng ch·ªçn m·ªôt trong c√°c t√πy ch·ªçn b√™n d∆∞·ªõi ho·∫∑c nh·∫≠p c√¢u h·ªèi c·ªßa b·∫°n."
                },
                placeholder: "Nh·∫≠p c√¢u h·ªèi ho·∫∑c s·ªë menu...",
                categories: {
                    salary: {
                        title: "üí∞ L∆Ø∆†NG V√Ä B·∫¢NG L∆Ø∆†NG",
                        items: [
                            "L·∫•y b·∫£ng l∆∞∆°ng",
                            "S·ªï l∆∞∆°ng cho visa",
                            "Gi·∫•y kh·∫•u tr·ª´ thu·∫ø",
                            "L∆∞∆°ng kh√¥ng ƒë·ªß",
                            "Ph√≠ ƒëi l·∫°i"
                        ]
                    },
                    visa: {
                        title: "üõÇ VISA V√Ä TH·∫∫ C∆Ø TR√ö",
                        items: [
                            "N·ªôp th·∫ª c∆∞ tr√∫",
                            "Gia h·∫°n th·∫ª c∆∞ tr√∫",
                            "Th·∫ª c∆∞ tr√∫ s·∫Øp h·∫øt h·∫°n"
                        ]
                    },
                    attendance: {
                        title: "üìÖ CH·∫§M C√îNG V√Ä NGH·ªà L√ÄM",
                        items: [
                            "Th√¥ng b√°o ƒë·∫øn mu·ªôn/ngh·ªâ l√†m",
                            "S·ªë ng√†y l√†m vi·ªác kh√¥ng ƒë·ªß",
                            "H·ªì s∆° ch·∫•m c√¥ng sai"
                        ]
                    },
                    shift: {
                        title: "‚è∞ CA L√ÄM VI·ªÜC",
                        items: [
                            "Thay ƒë·ªïi ca l√†m vi·ªác",
                            "Gi·ªõi h·∫°n gi·ªù l√†m vi·ªác"
                        ]
                    },
                    system: {
                        title: "üíª H·ªÜ TH·ªêNG",
                        items: [
                            "Kh√¥ng th·ªÉ ƒëƒÉng nh·∫≠p CMS",
                            "Qu√™n m·∫≠t kh·∫©u"
                        ]
                    },
                    other: {
                        title: "‚ùì KH√ÅC",
                        items: [
                            "Gia h·∫°n h·ª£p ƒë·ªìng",
                            "Kh·∫•u tr·ª´ ph·ª• thu·ªôc",
                            "Xe bu√Ωt v√† ƒë·ªãa ƒëi·ªÉm"
                        ]
                    }
                }
            },
            ja: {
                title: "LABORO „ÉÅ„É£„ÉÉ„Éà„Éú„ÉÉ„Éà",
                subtitle: "Ëá™Âãï„Çµ„Éù„Éº„Éà",
                welcome: {
                    title: "„Åì„Çì„Å´„Å°„ÅØÔºÅ",
                    message: "LABORO„ÅÆËá™Âãï„Çµ„Éù„Éº„Éà„É≠„Éú„ÉÉ„Éà„Åß„Åô„ÄÇ",
                    services: [
                        "üí∞ Áµ¶‰∏é„ÉªÁµ¶‰∏éÊòéÁ¥∞",
                        "üõÇ „Éì„Ç∂„ÉªÂú®Áïô„Ç´„Éº„Éâ",
                        "üìÖ Âá∫Âã§„ÉªÊ¨†Âã§",
                        "‚è∞ „Ç∑„Éï„Éà",
                        "üíª CMS„Ç∑„Çπ„ÉÜ„É†"
                    ],
                    instruction: "‰∏ãË®ò„ÅÆ„Ç™„Éó„Ç∑„Éß„É≥„Åã„ÇâÈÅ∏Êäû„Åô„Çã„Åã„ÄÅ„ÅîË≥™Âïè„ÇíÂÖ•Âäõ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ"
                },
                placeholder: "Ë≥™Âïè„Åæ„Åü„ÅØ„É°„Éã„É•„ÉºÁï™Âè∑„ÇíÂÖ•Âäõ...",
                categories: {
                    salary: {
                        title: "üí∞ Áµ¶‰∏é„ÉªÁµ¶‰∏éÊòéÁ¥∞",
                        items: [
                            "Áµ¶‰∏éÊòéÁ¥∞„ÇíÂèñÂæó",
                            "„Éì„Ç∂Êõ¥Êñ∞Áî®„ÅÆË≥ÉÈáëÂè∞Â∏≥",
                            "Ê∫êÊ≥âÂæ¥ÂèéÁ•®",
                            "Áµ¶‰∏é„ÅåË∂≥„Çä„Å™„ÅÑ",
                            "‰∫§ÈÄöË≤ª"
                        ]
                    },
                    visa: {
                        title: "üõÇ „Éì„Ç∂„ÉªÂú®Áïô„Ç´„Éº„Éâ",
                        items: [
                            "Âú®Áïô„Ç´„Éº„Éâ„ÅÆÊèêÂá∫",
                            "Âú®Áïô„Ç´„Éº„Éâ„ÅÆÊõ¥Êñ∞",
                            "Âú®Áïô„Ç´„Éº„Éâ„ÅÆÊúüÈôê„ÅåËøë„ÅÑ"
                        ]
                    },
                    attendance: {
                        title: "üìÖ Âá∫Âã§„ÉªÊ¨†Âã§",
                        items: [
                            "ÈÅÖÂàª„ÉªÊ¨†Âã§ÈÄ£Áµ°",
                            "Âá∫Âã§Êó•Êï∞„ÅåË∂≥„Çä„Å™„ÅÑ",
                            "Âá∫Âã§Ë®òÈå≤„ÅåÈñìÈÅï„Å£„Å¶„ÅÑ„Çã"
                        ]
                    },
                    shift: {
                        title: "‚è∞ „Ç∑„Éï„Éà",
                        items: [
                            "„Ç∑„Éï„ÉàÂ§âÊõ¥",
                            "Âä¥ÂÉçÊôÇÈñì„ÅÆ‰∏äÈôê"
                        ]
                    },
                    system: {
                        title: "üíª „Ç∑„Çπ„ÉÜ„É†",
                        items: [
                            "CMS„Å´„É≠„Ç∞„Ç§„É≥„Åß„Åç„Å™„ÅÑ",
                            "„Éë„Çπ„ÉØ„Éº„Éâ„ÇíÂøò„Çå„Åü"
                        ]
                    },
                    other: {
                        title: "‚ùì „Åù„ÅÆ‰ªñ",
                        items: [
                            "Â•ëÁ¥ÑÊõ¥Êñ∞",
                            "Êâ∂È§äÊéßÈô§",
                            "„Ç∑„É£„Éà„É´„Éê„Çπ„ÉªÊ¥æÈÅ£ÂÖà"
                        ]
                    }
                }
            },
            en: {
                title: "LABORO Chatbot",
                subtitle: "Automated Support",
                welcome: {
                    title: "Hello!",
                    message: "You are chatting with LABORO's automated support robot!",
                    services: [
                        "üí∞ Salary and payslip",
                        "üõÇ Visa and residence card",
                        "üìÖ Attendance and absence",
                        "‚è∞ Work shift",
                        "üíª CMS System"
                    ],
                    instruction: "Please select one of the options below or enter your question."
                },
                placeholder: "Enter question or menu number...",
                categories: {
                    salary: {
                        title: "üí∞ SALARY AND PAYSLIP",
                        items: [
                            "Get payslip",
                            "Salary ledger for visa",
                            "Tax deduction certificate",
                            "Insufficient salary",
                            "Transportation fee"
                        ]
                    },
                    visa: {
                        title: "üõÇ VISA AND RESIDENCE CARD",
                        items: [
                            "Submit residence card",
                            "Renew residence card",
                            "Residence card expiring soon"
                        ]
                    },
                    attendance: {
                        title: "üìÖ ATTENDANCE AND ABSENCE",
                        items: [
                            "Report late/absence",
                            "Insufficient work days",
                            "Incorrect attendance record"
                        ]
                    },
                    shift: {
                        title: "‚è∞ WORK SHIFT",
                        items: [
                            "Change work shift",
                            "Working hours limit"
                        ]
                    },
                    system: {
                        title: "üíª SYSTEM",
                        items: [
                            "Cannot login to CMS",
                            "Forgot password"
                        ]
                    },
                    other: {
                        title: "‚ùì OTHER",
                        items: [
                            "Contract renewal",
                            "Dependent deduction",
                            "Shuttle bus and location"
                        ]
                    }
                }
            },
            ne: {
                title: "LABORO Chatbot",
                subtitle: "‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ",
                welcome: {
                    title: "‡§®‡§Æ‡§∏‡•ç‡§§‡•á!",
                    message: "‡§§‡§™‡§æ‡§à‡§Ç LABORO ‡§ï‡•ã ‡§∏‡•ç‡§µ‡§ö‡§æ‡§≤‡§ø‡§§ ‡§∏‡§π‡§æ‡§Ø‡§§‡§æ ‡§∞‡•ã‡§¨‡•ã‡§ü‡§∏‡§Å‡§ó ‡§ï‡•Å‡§∞‡§æ ‡§ó‡§∞‡•ç‡§¶‡•à ‡§π‡•Å‡§®‡•Å‡§π‡•Å‡§®‡•ç‡§õ!",
                    services: [
                        "üí∞ ‡§§‡§≤‡§¨ ‡§∞ ‡§§‡§≤‡§¨‡§ï‡•ã ‡§¨‡§ø‡§≤",
                        "üõÇ ‡§≠‡§ø‡§∏‡§æ ‡§∞ ‡§®‡§ø‡§µ‡§æ‡§∏ ‡§ï‡§æ‡§∞‡•ç‡§°",
                        "üìÖ ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§∞ ‡§Ö‡§®‡•Å‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø",
                        "‚è∞ ‡§ï‡§æ‡§Æ‡§ï‡•ã ‡§∏‡§Æ‡§Ø",
                        "üíª CMS ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä"
                    ],
                    instruction: "‡§ï‡•É‡§™‡§Ø‡§æ ‡§§‡§≤‡§ï‡§æ ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™‡§π‡§∞‡•Ç ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§è‡§â‡§ü‡§æ ‡§õ‡§æ‡§®‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç ‡§µ‡§æ ‡§Ü‡§´‡•ç‡§®‡•ã ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç‡•§"
                },
                placeholder: "‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§µ‡§æ ‡§Æ‡•á‡§®‡•Å ‡§®‡§Æ‡•ç‡§¨‡§∞ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç...",
                categories: {
                    salary: {
                        title: "üí∞ ‡§§‡§≤‡§¨ ‡§∞ ‡§§‡§≤‡§¨‡§ï‡•ã ‡§¨‡§ø‡§≤",
                        items: [
                            "‡§§‡§≤‡§¨‡§ï‡•ã ‡§¨‡§ø‡§≤ ‡§≤‡§ø‡§®‡•Å‡§π‡•ã‡§∏‡•ç",
                            "‡§≠‡§ø‡§∏‡§æ ‡§ï‡•ã ‡§≤‡§æ‡§ó‡§ø ‡§§‡§≤‡§¨‡§ï‡•ã ‡§¨‡§π‡•Ä",
                            "‡§ï‡§∞ ‡§ï‡§ü‡•å‡§§‡•Ä ‡§™‡•ç‡§∞‡§Æ‡§æ‡§£‡§™‡§§‡•ç‡§∞",
                            "‡§§‡§≤‡§¨ ‡§Ö‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§",
                            "‡§Ø‡§æ‡§§‡§æ‡§Ø‡§æ‡§§ ‡§∂‡•Å‡§≤‡•ç‡§ï"
                        ]
                    },
                    visa: {
                        title: "üõÇ ‡§≠‡§ø‡§∏‡§æ ‡§∞ ‡§®‡§ø‡§µ‡§æ‡§∏ ‡§ï‡§æ‡§∞‡•ç‡§°",
                        items: [
                            "‡§®‡§ø‡§µ‡§æ‡§∏ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§™‡•á‡§∂ ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç",
                            "‡§®‡§ø‡§µ‡§æ‡§∏ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§®‡§µ‡•Ä‡§ï‡§∞‡§£",
                            "‡§®‡§ø‡§µ‡§æ‡§∏ ‡§ï‡§æ‡§∞‡•ç‡§° ‡§õ‡§ø‡§ü‡•ç‡§ü‡•à ‡§∏‡§Æ‡§æ‡§™‡•ç‡§§ ‡§π‡•Å‡§®‡•á"
                        ]
                    },
                    attendance: {
                        title: "üìÖ ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§∞ ‡§Ö‡§®‡•Å‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø",
                        items: [
                            "‡§¢‡§ø‡§≤‡•ã/‡§Ö‡§®‡•Å‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§∏‡•Ç‡§ö‡§®‡§æ",
                            "‡§ï‡§æ‡§Æ‡§ï‡•ã ‡§¶‡§ø‡§® ‡§Ö‡§™‡§∞‡•ç‡§Ø‡§æ‡§™‡•ç‡§§",
                            "‡§ó‡§≤‡§§ ‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§∞‡•á‡§ï‡§∞‡•ç‡§°"
                        ]
                    },
                    shift: {
                        title: "‚è∞ ‡§ï‡§æ‡§Æ‡§ï‡•ã ‡§∏‡§Æ‡§Ø",
                        items: [
                            "‡§ï‡§æ‡§Æ‡§ï‡•ã ‡§∏‡§Æ‡§Ø ‡§™‡§∞‡§ø‡§µ‡§∞‡•ç‡§§‡§®",
                            "‡§ï‡§æ‡§Æ‡§ï‡•ã ‡§∏‡§Æ‡§Ø ‡§∏‡•Ä‡§Æ‡§æ"
                        ]
                    },
                    system: {
                        title: "üíª ‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä",
                        items: [
                            "CMS ‡§Æ‡§æ ‡§≤‡§ó‡§á‡§® ‡§ó‡§∞‡•ç‡§® ‡§∏‡§ï‡•ç‡§¶‡•à‡§®",
                            "‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§° ‡§¨‡§ø‡§∞‡•ç‡§∏‡§®‡•Å‡§≠‡§Ø‡•ã"
                        ]
                    },
                    other: {
                        title: "‚ùì ‡§Ö‡§®‡•ç‡§Ø",
                        items: [
                            "‡§∏‡§Æ‡•ç‡§ù‡•å‡§§‡§æ ‡§®‡§µ‡•Ä‡§ï‡§∞‡§£",
                            "‡§®‡§ø‡§∞‡•ç‡§≠‡§∞ ‡§ï‡§ü‡•å‡§§‡•Ä",
                            "‡§∂‡§ü‡§≤ ‡§¨‡§∏ ‡§∞ ‡§∏‡•ç‡§•‡§æ‡§®"
                        ]
                    }
                }
            }
        };

        let currentLanguage = 'vi';
        let currentMenuPage = 0;
        let currentCategory = null;

        // Ë®ÄË™ûÂ§âÊõ¥
        document.getElementById('languageSelect').addEventListener('change', (e) => {
            currentLanguage = e.target.value;
            updateLanguage();
        });

        function updateLanguage() {
            const lang = languages[currentLanguage];
            document.getElementById('headerTitle').textContent = lang.title;
            document.getElementById('headerSubtitle').textContent = lang.subtitle;
            document.getElementById('chatInput').placeholder = lang.placeholder;
            
            // „Ç¶„Çß„É´„Ç´„É†„É°„ÉÉ„Çª„Éº„Ç∏„ÅÆÊõ¥Êñ∞
            const welcomeMessage = document.getElementById('welcomeMessage');
            if (welcomeMessage) {
                welcomeMessage.innerHTML = `
                    <h2>${lang.welcome.title}</h2>
                    <p>${lang.welcome.message}</p>
                    <p>${currentLanguage === 'vi' ? 'T√¥i c√≥ th·ªÉ gi√∫p b·∫°n v·ªÅ:' : 
                        currentLanguage === 'ja' ? '‰ª•‰∏ã„ÅÆ„Åì„Å®„Å´„Å§„ÅÑ„Å¶„ÅäÁ≠î„Åà„Åß„Åç„Åæ„ÅôÔºö' :
                        currentLanguage === 'en' ? 'I can help you with:' :
                        '‡§Æ ‡§§‡§™‡§æ‡§à‡§Ç‡§≤‡§æ‡§à ‡§Ø‡§∏‡§¨‡§æ‡§∞‡•á ‡§Æ‡§¶‡•ç‡§¶‡§§ ‡§ó‡§∞‡•ç‡§® ‡§∏‡§ï‡•ç‡§õ‡•Å:'}</p>
                    <ul>
                        ${lang.welcome.services.map(service => `<li>${service}</li>`).join('')}
                    </ul>
                    <p style="margin-top: 15px;">${lang.welcome.instruction}</p>
                `;
            }
            
            // „Ç≥„Éû„É≥„Éâ„Éú„Çø„É≥„ÅÆÊõ¥Êñ∞
            const commandButtons = document.querySelectorAll('.command-button');
            const commandTexts = {
                vi: ['üè° HOME', 'üôãüèª‚Äç‚ôÄÔ∏è CSKH', 'üìã H∆Ø·ªöNG D·∫™N'],
                ja: ['üè° HOME', 'üôãüèª‚Äç‚ôÄÔ∏è ÊãÖÂΩìËÄÖ', 'üìã „Ç¨„Ç§„Éâ'],
                en: ['üè° HOME', 'üôãüèª‚Äç‚ôÄÔ∏è Coordinator', 'üìã GUIDE'],
                ne: ['üè° HOME', 'üôãüèª‚Äç‚ôÄÔ∏è ‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø‡§ï', 'üìã ‡§ó‡§æ‡§á‡§°']
            };
            const texts = commandTexts[currentLanguage] || commandTexts.vi;
            commandButtons.forEach((btn, index) => {
                btn.textContent = texts[index];
            });
        }

        // „Éõ„Éº„É†„Å´Êàª„Çã
        function goHome() {
            currentCategory = null;
            currentMenuPage = 0;
            showMainMenu();
        }

        // „É°„Ç§„É≥„É°„Éã„É•„Éº„ÇíË°®Á§∫
        function showMainMenu() {
            const chatMessages = document.getElementById('chatMessages');
            const welcomeMessage = document.getElementById('welcomeMessage');
            if (welcomeMessage) {
                welcomeMessage.style.display = 'block';
            }
            
            // Êó¢Â≠ò„ÅÆ„É°„ÉÉ„Çª„Éº„Ç∏„Çí„ÇØ„É™„Ç¢Ôºà„Ç¶„Çß„É´„Ç´„É†„É°„ÉÉ„Çª„Éº„Ç∏‰ª•Â§ñÔºâ
            const messages = chatMessages.querySelectorAll('.message, .menu-card');
            messages.forEach(msg => {
                if (!msg.classList.contains('welcome-message')) {
                    msg.remove();
                }
            });

            addBotMessage(getWelcomeText());
            showCategoryMenu();
        }

        function getWelcomeText() {
            const lang = languages[currentLanguage];
            return lang.welcome.message + '\n\n' + lang.welcome.services.join('\n') + '\n\n' + lang.welcome.instruction;
        }

        // „Ç´„ÉÜ„Ç¥„É™„É°„Éã„É•„Éº„ÇíË°®Á§∫
        function showCategoryMenu() {
            const lang = languages[currentLanguage];
            const categories = Object.keys(lang.categories);
            const categoriesPerPage = 2;
            const startIndex = currentMenuPage * categoriesPerPage;
            const endIndex = Math.min(startIndex + categoriesPerPage, categories.length);
            
            // ÂÖ®„Ç´„ÉÜ„Ç¥„É™„ÇíÈÄö„Åó„ÅüÈÄ£Áï™„ÇíË®àÁÆó
            let globalItemNumber = 1;
            for (let i = 0; i < startIndex; i++) {
                globalItemNumber += lang.categories[categories[i]].items.length;
            }
            
            const menuCard = document.createElement('div');
            menuCard.className = 'menu-card';
            
            let html = '';
            for (let i = startIndex; i < endIndex; i++) {
                const categoryKey = categories[i];
                const category = lang.categories[categoryKey];
                html += `<h3>${category.title}</h3>`;
                category.items.forEach((item, index) => {
                    const itemNumber = globalItemNumber;
                    html += `
                        <div class="menu-item" onclick="selectMenuItem('${categoryKey}', ${index})">
                            <div class="menu-item-number">${itemNumber}</div>
                            <div class="menu-item-text">${item}</div>
                        </div>
                    `;
                    globalItemNumber++;
                });
            }
            
            // „Éä„Éì„Ç≤„Éº„Ç∑„Éß„É≥„Éú„Çø„É≥
            const navTexts = {
                vi: { prev: '‚Üê Tr∆∞·ªõc', next: 'Ti·∫øp ‚Üí' },
                ja: { prev: '‚Üê Ââç', next: 'Ê¨° ‚Üí' },
                en: { prev: '‚Üê Previous', next: 'Next ‚Üí' },
                ne: { prev: '‚Üê ‡§Ö‡§ò‡§ø‡§≤‡•ç‡§≤‡•ã', next: '‡§Ö‡§∞‡•ç‡§ï‡•ã ‚Üí' }
            };
            const navText = navTexts[currentLanguage] || navTexts.vi;
            html += '<div class="menu-navigation">';
            html += `<button class="nav-button" ${currentMenuPage === 0 ? 'disabled' : ''} onclick="previousMenuPage()">${navText.prev}</button>`;
            html += `<button class="nav-button" ${endIndex >= categories.length ? 'disabled' : ''} onclick="nextMenuPage()">${navText.next}</button>`;
            html += '</div>';
            
            menuCard.innerHTML = html;
            
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.appendChild(menuCard);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function previousMenuPage() {
            if (currentMenuPage > 0) {
                currentMenuPage--;
                showCategoryMenu();
            }
        }

        function nextMenuPage() {
            const lang = languages[currentLanguage];
            const categories = Object.keys(lang.categories);
            const categoriesPerPage = 2;
            if ((currentMenuPage + 1) * categoriesPerPage < categories.length) {
                currentMenuPage++;
                showCategoryMenu();
            }
        }

        // „É°„Éã„É•„ÉºÈ†ÖÁõÆ„ÇíÈÅ∏Êäû
        function selectMenuItem(categoryKey, itemIndex) {
            currentCategory = { categoryKey, itemIndex };
            const lang = languages[currentLanguage];
            const category = lang.categories[categoryKey];
            const item = category.items[itemIndex];
            
            addUserMessage(item);
            showAnswer(categoryKey, itemIndex);
        }

        // ÂõûÁ≠î„ÇíË°®Á§∫
        function showAnswer(categoryKey, itemIndex) {
            const lang = languages[currentLanguage];
            const answers = getAnswers(lang);
            const answerKey = `${categoryKey}_${itemIndex}`;
            const answer = answers[answerKey] || answers.default;
            
            addBotMessage(answer.text);
            
            if (answer.actions && answer.actions.length > 0) {
                showActionButtons(answer.actions);
            }
        }

        // ÂõûÁ≠î„Éá„Éº„Çø
        function getAnswers(lang) {
            const answers = {
                vi: {
                    salary_0: {
                        text: "B·∫£ng l∆∞∆°ng c√≥ th·ªÉ ƒë∆∞·ª£c t·∫£i xu·ªëng t·ª´ CMS \"Laboro Control\".\nSau khi ƒëƒÉng nh·∫≠p, vui l√≤ng t·∫£i xu·ªëng b·∫£ng l∆∞∆°ng c·ªßa th√°ng t∆∞∆°ng ·ª©ng t·ª´ menu \"Áµ¶‰∏éÊòéÁ¥∞\".",
                        actions: [
                            { type: 'link', text: 'üì± ƒêƒÉng nh·∫≠p CMS', action: 'openCMS' },
                            { type: 'menu', text: '‚ùì Kh√¥ng th·ªÉ ƒëƒÉng nh·∫≠p', action: 'system_0' },
                            { type: 'contact', text: 'üìû Li√™n h·ªá ƒëi·ªÅu ph·ªëi vi√™n', action: 'contactCoordinator' },
                            { type: 'home', text: 'üè† V·ªÅ trang ch·ªß', action: 'goHome' }
                        ]
                    },
                    attendance_0: {
                        text: "C·∫£m ∆°n b·∫°n ƒë√£ th√¥ng b√°o ƒë·∫øn mu·ªôn/ngh·ªâ l√†m.\nƒêi·ªÅu quan tr·ªçng l√† ph·∫£i li√™n h·ªá c√†ng s·ªõm c√†ng t·ªët.",
                        actions: [
                            { type: 'form', text: 'üìù G·ª≠i bi·ªÉu m·∫´u', action: 'showLateForm' },
                            { type: 'contact', text: 'üìû Li√™n h·ªá tr·ª±c ti·∫øp', action: 'contactCoordinator' },
                            { type: 'home', text: 'üè† V·ªÅ trang ch·ªß', action: 'goHome' }
                        ]
                    },
                    default: {
                        text: "Vui l√≤ng li√™n h·ªá v·ªõi ƒëi·ªÅu ph·ªëi vi√™n ph·ª• tr√°ch c·ªßa b·∫°n ƒë·ªÉ bi·∫øt th√™m chi ti·∫øt.",
                        actions: [
                            { type: 'contact', text: 'üìû Li√™n h·ªá ƒëi·ªÅu ph·ªëi vi√™n', action: 'contactCoordinator' },
                            { type: 'home', text: 'üè† V·ªÅ trang ch·ªß', action: 'goHome' }
                        ]
                    }
                },
                ja: {
                    salary_0: {
                        text: "Áµ¶‰∏éÊòéÁ¥∞„ÅØ„ÄÅCMS„ÄåLaboro Control„Äç„Åã„Çâ„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åß„Åç„Åæ„Åô„ÄÇ\n„É≠„Ç∞„Ç§„É≥Âæå„ÄÅ„ÄåÁµ¶‰∏éÊòéÁ¥∞„Äç„É°„Éã„É•„Éº„Åã„ÇâË©≤ÂΩìÊúà„ÅÆÊòéÁ¥∞„Çí„ÉÄ„Ç¶„É≥„É≠„Éº„Éâ„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ",
                        actions: [
                            { type: 'link', text: 'üì± CMS„Å´„É≠„Ç∞„Ç§„É≥', action: 'openCMS' },
                            { type: 'menu', text: '‚ùì „É≠„Ç∞„Ç§„É≥„Åß„Åç„Å™„ÅÑ', action: 'system_0' },
                            { type: 'contact', text: 'üìû „Ç≥„Éº„Éá„Ç£„Éç„Éº„Çø„Éº„Å´ÈÄ£Áµ°', action: 'contactCoordinator' },
                            { type: 'home', text: 'üè† „Éõ„Éº„É†„Å´Êàª„Çã', action: 'goHome' }
                        ]
                    },
                    attendance_0: {
                        text: "ÈÅÖÂàª„ÉªÊ¨†Âã§„ÅÆÈÄ£Áµ°„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ\n„Åß„Åç„Çã„Å†„ÅëÊó©„ÅèÈÄ£Áµ°„Åó„Å¶„ÅÑ„Åü„Å†„Åè„Åì„Å®„ÅåÈáçË¶Å„Åß„Åô„ÄÇ",
                        actions: [
                            { type: 'form', text: 'üìù ÈÄ£Áµ°„Éï„Ç©„Éº„É†„ÇíÈÄÅ‰ø°', action: 'showLateForm' },
                            { type: 'contact', text: 'üìû Áõ¥Êé•ÈÄ£Áµ°', action: 'contactCoordinator' },
                            { type: 'home', text: 'üè† „Éõ„Éº„É†„Å´Êàª„Çã', action: 'goHome' }
                        ]
                    },
                    default: {
                        text: "Ë©≥Á¥∞„Å´„Å§„ÅÑ„Å¶„ÅØ„ÄÅÊãÖÂΩì„Ç≥„Éº„Éá„Ç£„Éç„Éº„Çø„Éº„Å´„ÅäÂïè„ÅÑÂêà„Çè„Åõ„Åè„Å†„Åï„ÅÑ„ÄÇ",
                        actions: [
                            { type: 'contact', text: 'üìû „Ç≥„Éº„Éá„Ç£„Éç„Éº„Çø„Éº„Å´ÈÄ£Áµ°', action: 'contactCoordinator' },
                            { type: 'home', text: 'üè† „Éõ„Éº„É†„Å´Êàª„Çã', action: 'goHome' }
                        ]
                    }
                },
                en: {
                    salary_0: {
                        text: "You can download your payslip from CMS \"Laboro Control\".\nAfter logging in, please download the payslip for the relevant month from the \"Áµ¶‰∏éÊòéÁ¥∞\" menu.",
                        actions: [
                            { type: 'link', text: 'üì± Login to CMS', action: 'openCMS' },
                            { type: 'menu', text: '‚ùì Cannot login', action: 'system_0' },
                            { type: 'contact', text: 'üìû Contact coordinator', action: 'contactCoordinator' },
                            { type: 'home', text: 'üè† Go home', action: 'goHome' }
                        ]
                    },
                    attendance_0: {
                        text: "Thank you for reporting late/absence.\nIt is important to contact as soon as possible.",
                        actions: [
                            { type: 'form', text: 'üìù Submit form', action: 'showLateForm' },
                            { type: 'contact', text: 'üìû Contact directly', action: 'contactCoordinator' },
                            { type: 'home', text: 'üè† Go home', action: 'goHome' }
                        ]
                    },
                    default: {
                        text: "Please contact your assigned coordinator for more details.",
                        actions: [
                            { type: 'contact', text: 'üìû Contact coordinator', action: 'contactCoordinator' },
                            { type: 'home', text: 'üè† Go home', action: 'goHome' }
                        ]
                    }
                },
                ne: {
                    salary_0: {
                        text: "‡§§‡§™‡§æ‡§à‡§Ç CMS \"Laboro Control\" ‡§¨‡§æ‡§ü ‡§§‡§≤‡§¨‡§ï‡•ã ‡§¨‡§ø‡§≤ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ó‡§∞‡•ç‡§® ‡§∏‡§ï‡•ç‡§®‡•Å‡§π‡•Å‡§®‡•ç‡§õ‡•§\n‡§≤‡§ó‡§á‡§® ‡§™‡§õ‡§ø, ‡§ï‡•É‡§™‡§Ø‡§æ \"Áµ¶‰∏éÊòéÁ¥∞\" ‡§Æ‡•á‡§®‡•Å‡§¨‡§æ‡§ü ‡§∏‡§Æ‡•ç‡§¨‡§®‡•ç‡§ß‡§ø‡§§ ‡§Æ‡§π‡§ø‡§®‡§æ‡§ï‡•ã ‡§¨‡§ø‡§≤ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç‡•§",
                        actions: [
                            { type: 'link', text: 'üì± CMS ‡§Æ‡§æ ‡§≤‡§ó‡§á‡§®', action: 'openCMS' },
                            { type: 'menu', text: '‚ùì ‡§≤‡§ó‡§á‡§® ‡§ó‡§∞‡•ç‡§® ‡§∏‡§ï‡•ç‡§¶‡•à‡§®', action: 'system_0' },
                            { type: 'contact', text: 'üìû ‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø‡§ï‡§≤‡§æ‡§à ‡§∏‡§Æ‡•ç‡§™‡§∞‡•ç‡§ï', action: 'contactCoordinator' },
                            { type: 'home', text: 'üè† ‡§ò‡§∞ ‡§´‡§∞‡•ç‡§ï‡§®‡•Å‡§π‡•ã‡§∏‡•ç', action: 'goHome' }
                        ]
                    },
                    attendance_0: {
                        text: "‡§¢‡§ø‡§≤‡•ã/‡§Ö‡§®‡•Å‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§∏‡•Ç‡§ö‡§®‡§æ ‡§¶‡§ø‡§®‡•Å‡§≠‡§è‡§ï‡•ã‡§Æ‡§æ ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶‡•§\n‡§Ø‡§•‡§æ‡§∂‡•Ä‡§ò‡•ç‡§∞ ‡§∏‡§Æ‡•ç‡§™‡§∞‡•ç‡§ï ‡§ó‡§∞‡•ç‡§®‡•Å ‡§Æ‡§π‡§§‡•ç‡§µ‡§™‡•Ç‡§∞‡•ç‡§£ ‡§õ‡•§",
                        actions: [
                            { type: 'form', text: 'üìù ‡§´‡§æ‡§∞‡§Æ ‡§™‡•á‡§∂ ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç', action: 'showLateForm' },
                            { type: 'contact', text: 'üìû ‡§∏‡•Ä‡§ß‡•à ‡§∏‡§Æ‡•ç‡§™‡§∞‡•ç‡§ï', action: 'contactCoordinator' },
                            { type: 'home', text: 'üè† ‡§ò‡§∞ ‡§´‡§∞‡•ç‡§ï‡§®‡•Å‡§π‡•ã‡§∏‡•ç', action: 'goHome' }
                        ]
                    },
                    default: {
                        text: "‡§•‡§™ ‡§µ‡§ø‡§µ‡§∞‡§£‡§ï‡•ã ‡§≤‡§æ‡§ó‡§ø ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Ü‡§´‡•ç‡§®‡•ã ‡§∏‡§Æ‡•ç‡§¨‡§®‡•ç‡§ß‡§ø‡§§ ‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø‡§ï‡§≤‡§æ‡§à ‡§∏‡§Æ‡•ç‡§™‡§∞‡•ç‡§ï ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç‡•§",
                        actions: [
                            { type: 'contact', text: 'üìû ‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø‡§ï‡§≤‡§æ‡§à ‡§∏‡§Æ‡•ç‡§™‡§∞‡•ç‡§ï', action: 'contactCoordinator' },
                            { type: 'home', text: 'üè† ‡§ò‡§∞ ‡§´‡§∞‡•ç‡§ï‡§®‡•Å‡§π‡•ã‡§∏‡•ç', action: 'goHome' }
                        ]
                    }
                }
            };
            
            return answers[currentLanguage] || answers.vi;
        }

        // „Ç¢„ÇØ„Ç∑„Éß„É≥„Éú„Çø„É≥„ÇíË°®Á§∫
        function showActionButtons(actions) {
            const actionContainer = document.createElement('div');
            actionContainer.className = 'action-buttons';
            
            actions.forEach(action => {
                const button = document.createElement('button');
                button.className = `action-button ${action.type === 'contact' || action.type === 'link' ? 'primary' : 'secondary'}`;
                button.innerHTML = `<span class="action-button-icon">${action.text.split(' ')[0]}</span> ${action.text.substring(action.text.indexOf(' ') + 1)}`;
                button.onclick = () => handleAction(action.action);
                actionContainer.appendChild(button);
            });
            
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.appendChild(actionContainer);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        // „Ç¢„ÇØ„Ç∑„Éß„É≥„ÇíÂá¶ÁêÜ
        function handleAction(action) {
            switch(action) {
                case 'openCMS':
                    const cmsMessages = {
                        vi: 'ƒêang m·ªü CMS...\nURL: https://cms.laboro.co.jp (URL th·ª±c t·∫ø s·∫Ω ƒë∆∞·ª£c LABORO cung c·∫•p)',
                        ja: 'CMS„ÇíÈñã„ÅÑ„Å¶„ÅÑ„Åæ„Åô...\nURL: https://cms.laboro.co.jp (ÂÆüÈöõ„ÅÆURL„ÅØLABOROÁ§æ„Åã„ÇâÊèê‰æõ„Åï„Çå„Åæ„Åô)',
                        en: 'Opening CMS...\nURL: https://cms.laboro.co.jp (Actual URL will be provided by LABORO)',
                        ne: 'CMS ‡§ñ‡•ã‡§≤‡•ç‡§¶‡•à...\nURL: https://cms.laboro.co.jp (‡§µ‡§æ‡§∏‡•ç‡§§‡§µ‡§ø‡§ï URL LABORO ‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ó‡§∞‡§ø‡§®‡•á‡§õ)'
                    };
                    addBotMessage(cmsMessages[currentLanguage] || cmsMessages.vi);
                    break;
                case 'contactCoordinator':
                    connectCoordinator();
                    break;
                case 'showLateForm':
                    showLateForm();
                    break;
                case 'goHome':
                    goHome();
                    break;
                default:
                    if (action.includes('_')) {
                        const [category, index] = action.split('_');
                        selectMenuItem(category, parseInt(index));
                    }
            }
        }

        // ÈÅÖÂàª„ÉªÊ¨†Âã§„Éï„Ç©„Éº„É†„ÇíË°®Á§∫
        function showLateForm() {
            const formTexts = {
                vi: {
                    title: 'Th√¥ng b√°o ƒë·∫øn mu·ªôn/ngh·ªâ l√†m',
                    reason: 'L√Ω do',
                    selectReason: 'Ch·ªçn l√Ω do',
                    illness: 'B·ªánh',
                    delay: 'T√†u ƒëi·ªán tr·ªÖ',
                    other: 'Kh√°c',
                    time: 'Th·ªùi gian d·ª± ki·∫øn ƒë·∫øn',
                    submit: 'G·ª≠i',
                    cancel: 'H·ªßy'
                },
                ja: {
                    title: 'ÈÅÖÂàª„ÉªÊ¨†Âã§ÈÄ£Áµ°',
                    reason: 'ÁêÜÁî±',
                    selectReason: 'ÁêÜÁî±„ÇíÈÅ∏Êäû',
                    illness: 'ÁóÖÊ∞ó',
                    delay: 'ÈõªËªäÈÅÖÂª∂',
                    other: '„Åù„ÅÆ‰ªñ',
                    time: 'Âà∞ÁùÄ‰∫àÂÆöÊôÇÂàª',
                    submit: 'ÈÄÅ‰ø°',
                    cancel: '„Ç≠„É£„É≥„Çª„É´'
                },
                en: {
                    title: 'Report Late/Absence',
                    reason: 'Reason',
                    selectReason: 'Select reason',
                    illness: 'Illness',
                    delay: 'Train delay',
                    other: 'Other',
                    time: 'Expected arrival time',
                    submit: 'Submit',
                    cancel: 'Cancel'
                },
                ne: {
                    title: '‡§¢‡§ø‡§≤‡•ã/‡§Ö‡§®‡•Å‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø ‡§∏‡•Ç‡§ö‡§®‡§æ',
                    reason: '‡§ï‡§æ‡§∞‡§£',
                    selectReason: '‡§ï‡§æ‡§∞‡§£ ‡§õ‡§æ‡§®‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç',
                    illness: '‡§∞‡•ã‡§ó',
                    delay: '‡§ü‡•ç‡§∞‡•á‡§® ‡§¢‡§ø‡§≤‡•ã',
                    other: '‡§Ö‡§®‡•ç‡§Ø',
                    time: '‡§Ö‡§™‡•á‡§ï‡•ç‡§∑‡§ø‡§§ ‡§Ü‡§ó‡§Æ‡§® ‡§∏‡§Æ‡§Ø',
                    submit: '‡§™‡§†‡§æ‡§â‡§®‡•Å‡§π‡•ã‡§∏‡•ç',
                    cancel: '‡§∞‡§¶‡•ç‡§¶ ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç'
                }
            };
            const formText = formTexts[currentLanguage] || formTexts.vi;
            const formHtml = `
                <div class="form-container">
                    <h3>${formText.title}</h3>
                    <div class="form-group">
                        <label class="form-label">${formText.reason}</label>
                        <select class="form-select" id="lateReason">
                            <option value="">${formText.selectReason}</option>
                            <option value="illness">${formText.illness}</option>
                            <option value="delay">${formText.delay}</option>
                            <option value="other">${formText.other}</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label class="form-label">${formText.time}</label>
                        <input type="time" class="form-input" id="lateTime" />
                    </div>
                    <div class="form-buttons">
                        <button class="form-button submit" onclick="submitLateForm()">${formText.submit}</button>
                        <button class="form-button cancel" onclick="cancelForm()">${formText.cancel}</button>
                    </div>
                </div>
            `;
            
            const formDiv = document.createElement('div');
            formDiv.innerHTML = formHtml;
            const chatMessages = document.getElementById('chatMessages');
            chatMessages.appendChild(formDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function submitLateForm() {
            const reason = document.getElementById('lateReason').value;
            const time = document.getElementById('lateTime').value;
            
            const alertTexts = {
                vi: 'Vui l√≤ng ch·ªçn l√Ω do',
                ja: 'ÁêÜÁî±„ÇíÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ',
                en: 'Please select a reason',
                ne: '‡§ï‡•É‡§™‡§Ø‡§æ ‡§ï‡§æ‡§∞‡§£ ‡§õ‡§æ‡§®‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç'
            };
            
            if (!reason) {
                alert(alertTexts[currentLanguage] || alertTexts.vi);
                return;
            }
            
            const reasonTexts = {
                vi: { illness: 'B·ªánh', delay: 'T√†u ƒëi·ªán tr·ªÖ', other: 'Kh√°c' },
                ja: { illness: 'ÁóÖÊ∞ó', delay: 'ÈõªËªäÈÅÖÂª∂', other: '„Åù„ÅÆ‰ªñ' },
                en: { illness: 'Illness', delay: 'Train delay', other: 'Other' },
                ne: { illness: '‡§∞‡•ã‡§ó', delay: '‡§ü‡•ç‡§∞‡•á‡§® ‡§¢‡§ø‡§≤‡•ã', other: '‡§Ö‡§®‡•ç‡§Ø' }
            };
            const reasonText = reasonTexts[currentLanguage] || reasonTexts.vi;
            const displayReason = reasonText[reason] || reason;
            
            const userMessageTexts = {
                vi: `Th√¥ng b√°o: ${displayReason}${time ? `, Th·ªùi gian: ${time}` : ''}`,
                ja: `ÈÄ£Áµ°: ${displayReason}${time ? `, ÊôÇÂàª: ${time}` : ''}`,
                en: `Report: ${displayReason}${time ? `, Time: ${time}` : ''}`,
                ne: `‡§∏‡•Ç‡§ö‡§®‡§æ: ${displayReason}${time ? `, ‡§∏‡§Æ‡§Ø: ${time}` : ''}`
            };
            addUserMessage(userMessageTexts[currentLanguage] || userMessageTexts.vi);
            
            const botMessageTexts = {
                vi: 'C·∫£m ∆°n b·∫°n ƒë√£ g·ª≠i th√¥ng b√°o. ƒêi·ªÅu ph·ªëi vi√™n s·∫Ω li√™n h·ªá v·ªõi b·∫°n s·ªõm nh·∫•t c√≥ th·ªÉ.',
                ja: 'ÈÄ£Áµ°„ÅÇ„Çä„Åå„Å®„ÅÜ„Åî„Åñ„ÅÑ„Åæ„Åô„ÄÇ„Ç≥„Éº„Éá„Ç£„Éç„Éº„Çø„Éº„Åã„Çâ„Åß„Åç„Çã„Å†„ÅëÊó©„Åè„ÅîÈÄ£Áµ°„ÅÑ„Åü„Åó„Åæ„Åô„ÄÇ',
                en: 'Thank you for your report. The coordinator will contact you as soon as possible.',
                ne: '‡§∏‡•Ç‡§ö‡§®‡§æ ‡§™‡§†‡§æ‡§â‡§®‡•Å‡§≠‡§è‡§ï‡•ã‡§Æ‡§æ ‡§ß‡§®‡•ç‡§Ø‡§µ‡§æ‡§¶‡•§ ‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø‡§ï‡§≤‡•á ‡§Ø‡§•‡§æ‡§∂‡•Ä‡§ò‡•ç‡§∞ ‡§§‡§™‡§æ‡§à‡§Ç‡§≤‡§æ‡§à ‡§∏‡§Æ‡•ç‡§™‡§∞‡•ç‡§ï ‡§ó‡§∞‡•ç‡§®‡•á‡§õ‡•§'
            };
            addBotMessage(botMessageTexts[currentLanguage] || botMessageTexts.vi);
            
            cancelForm();
        }

        function cancelForm() {
            const form = document.querySelector('.form-container');
            if (form) {
                form.remove();
            }
        }

        // „Ç≥„Éº„Éá„Ç£„Éç„Éº„Çø„Éº„Å´Êé•Á∂ö
        function connectCoordinator() {
            const coordinatorMessages = {
                vi: 'ƒêang k·∫øt n·ªëi v·ªõi ƒëi·ªÅu ph·ªëi vi√™n ph·ª• tr√°ch c·ªßa b·∫°n...\n\nüì± Facebook Messenger: [Li√™n k·∫øt s·∫Ω ƒë∆∞·ª£c hi·ªÉn th·ªã]\n‚òéÔ∏è ƒêi·ªán tho·∫°i: 03-XXXX-XXXX\n‚è∞ Th·ªùi gian l√†m vi·ªác: Th·ª© 2 - Th·ª© 6, 9:00 - 18:00',
                ja: 'ÊãÖÂΩì„Ç≥„Éº„Éá„Ç£„Éç„Éº„Çø„Éº„Å´Êé•Á∂ö„Åó„Å¶„ÅÑ„Åæ„Åô...\n\nüì± Facebook„É°„ÉÉ„Çª„É≥„Ç∏„É£„Éº: [„É™„É≥„ÇØ„ÅåË°®Á§∫„Åï„Çå„Åæ„Åô]\n‚òéÔ∏è ÈõªË©±: 03-XXXX-XXXX\n‚è∞ ÂØæÂøúÊôÇÈñì: Âπ≥Êó• 9:00-18:00',
                en: 'Connecting to your assigned coordinator...\n\nüì± Facebook Messenger: [Link will be displayed]\n‚òéÔ∏è Phone: 03-XXXX-XXXX\n‚è∞ Business hours: Monday - Friday, 9:00 - 18:00',
                ne: '‡§§‡§™‡§æ‡§à‡§Ç‡§ï‡•ã ‡§∏‡§Æ‡•ç‡§¨‡§®‡•ç‡§ß‡§ø‡§§ ‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø‡§ï‡§∏‡§Å‡§ó ‡§ú‡•ã‡§°‡•ç‡§¶‡•à...\n\nüì± Facebook Messenger: [‡§≤‡§ø‡§ô‡•ç‡§ï ‡§™‡•ç‡§∞‡§¶‡§∞‡•ç‡§∂‡§® ‡§ó‡§∞‡§ø‡§®‡•á‡§õ]\n‚òéÔ∏è ‡§´‡•ã‡§®: 03-XXXX-XXXX\n‚è∞ ‡§ï‡§æ‡§∞‡•ç‡§Ø ‡§∏‡§Æ‡§Ø: ‡§∏‡•ã‡§Æ‡§¨‡§æ‡§∞ - ‡§∂‡•Å‡§ï‡•ç‡§∞‡§¨‡§æ‡§∞, 9:00 - 18:00'
            };
            addBotMessage(coordinatorMessages[currentLanguage] || coordinatorMessages.vi);
        }

        // „Ç¨„Ç§„Éâ„ÇíË°®Á§∫
        function showGuide() {
            const guideMessages = {
                vi: 'H∆∞·ªõng d·∫´n s·ª≠ d·ª•ng:\n\n1. Ch·ªçn m·ªôt trong c√°c menu b√™n d∆∞·ªõi\n2. Nh·∫≠p s·ªë menu (1, 2, 3...)\n3. Ho·∫∑c nh·∫≠p c√¢u h·ªèi tr·ª±c ti·∫øp\n\nLi√™n k·∫øt h∆∞·ªõng d·∫´n: [URL s·∫Ω ƒë∆∞·ª£c cung c·∫•p]',
                ja: '„ÅîÂà©Áî®„Ç¨„Ç§„Éâ:\n\n1. ‰∏ãË®ò„ÅÆ„É°„Éã„É•„Éº„Åã„ÇâÈÅ∏Êäû\n2. „É°„Éã„É•„ÉºÁï™Âè∑„ÇíÂÖ•ÂäõÔºà1, 2, 3...Ôºâ\n3. „Åæ„Åü„ÅØÁõ¥Êé•Ë≥™Âïè„ÇíÂÖ•Âäõ\n\n„Ç¨„Ç§„Éâ„É™„É≥„ÇØ: [URL„ÅåÊèê‰æõ„Åï„Çå„Åæ„Åô]',
                en: 'Usage Guide:\n\n1. Select one of the menus below\n2. Enter menu number (1, 2, 3...)\n3. Or enter your question directly\n\nGuide link: [URL will be provided]',
                ne: '‡§™‡•ç‡§∞‡§Ø‡•ã‡§ó ‡§ó‡§æ‡§á‡§°:\n\n1. ‡§§‡§≤‡§ï‡§æ ‡§Æ‡•á‡§®‡•Å‡§π‡§∞‡•Ç ‡§Æ‡§ß‡•ç‡§Ø‡•á ‡§è‡§â‡§ü‡§æ ‡§õ‡§æ‡§®‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç\n2. ‡§Æ‡•á‡§®‡•Å ‡§®‡§Æ‡•ç‡§¨‡§∞ ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç (1, 2, 3...)\n3. ‡§µ‡§æ ‡§∏‡•Ä‡§ß‡•à ‡§Ü‡§´‡•ç‡§®‡•ã ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§™‡•ç‡§∞‡§µ‡§ø‡§∑‡•ç‡§ü ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç\n\n‡§ó‡§æ‡§á‡§° ‡§≤‡§ø‡§ô‡•ç‡§ï: [URL ‡§™‡•ç‡§∞‡§¶‡§æ‡§® ‡§ó‡§∞‡§ø‡§®‡•á‡§õ]'
            };
            addBotMessage(guideMessages[currentLanguage] || guideMessages.vi);
        }

        // „É°„ÉÉ„Çª„Éº„Ç∏„ÇíËøΩÂä†
        function addMessage(text, sender) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const contentDiv = document.createElement('div');
            contentDiv.className = 'message-content';
            contentDiv.textContent = text;
            
            messageDiv.appendChild(contentDiv);
            
            const chatMessages = document.getElementById('chatMessages');
            const welcomeMessage = document.getElementById('welcomeMessage');
            if (welcomeMessage) {
                welcomeMessage.style.display = 'none';
            }
            
            chatMessages.appendChild(messageDiv);
            chatMessages.scrollTop = chatMessages.scrollHeight;
        }

        function addUserMessage(text) {
            addMessage(text, 'user');
        }

        function addBotMessage(text) {
            addMessage(text, 'bot');
        }

        // ÂÖ®ËßíÊï∞Â≠ó„ÇíÂçäËßíÊï∞Â≠ó„Å´Â§âÊèõ
        function convertFullWidthToHalfWidth(str) {
            return str.replace(/[Ôºê-Ôºô]/g, function(s) {
                return String.fromCharCode(s.charCodeAt(0) - 0xFEE0);
            });
        }

        // Êï∞Â≠ó„Åã„Å©„ÅÜ„Åã„ÇíÂà§ÂÆöÔºàÂÖ®Ëßí„ÉªÂçäËßí‰∏°ÂØæÂøúÔºâ
        function isNumeric(str) {
            // ÂÖ®ËßíÊï∞Â≠ó„ÇíÂçäËßí„Å´Â§âÊèõ„Åó„Å¶„Åã„ÇâÂà§ÂÆö
            const halfWidth = convertFullWidthToHalfWidth(str);
            return /^\d+$/.test(halfWidth);
        }

        // ÂÖ•ÂäõÂá¶ÁêÜ
        function handleInput() {
            const input = document.getElementById('chatInput');
            const text = input.value.trim();
            
            if (!text) return;
            
            // Êï∞Â≠óÂÖ•Âäõ„ÅÆÂ†¥Âêà„ÅØ„É°„Éã„É•„ÉºÈÅ∏ÊäûÔºàÂÖ®Ëßí„ÉªÂçäËßí‰∏°ÂØæÂøúÔºâ
            if (isNumeric(text)) {
                const halfWidthText = convertFullWidthToHalfWidth(text);
                const menuNumber = parseInt(halfWidthText);
                selectMenuByNumber(menuNumber);
            } else {
                // „ÉÜ„Ç≠„Çπ„ÉàÂÖ•Âäõ„ÅÆÂ†¥Âêà„ÅØ„Ç≠„Éº„ÉØ„Éº„Éâ„Éû„ÉÉ„ÉÅ„É≥„Ç∞
                handleTextInput(text);
            }
            
            input.value = '';
        }

        // Áï™Âè∑„Åß„É°„Éã„É•„Éº„ÇíÈÅ∏Êäû
        function selectMenuByNumber(number) {
            const lang = languages[currentLanguage];
            const categories = Object.keys(lang.categories);
            let currentNumber = 1;
            
            for (let i = 0; i < categories.length; i++) {
                const category = lang.categories[categories[i]];
                for (let j = 0; j < category.items.length; j++) {
                    if (currentNumber === number) {
                        selectMenuItem(categories[i], j);
                        return;
                    }
                    currentNumber++;
                }
            }
            
            const invalidMenuMessages = {
                vi: 'S·ªë menu kh√¥ng h·ª£p l·ªá. Vui l√≤ng ch·ªçn l·∫°i.',
                ja: 'ÁÑ°Âäπ„Å™„É°„Éã„É•„ÉºÁï™Âè∑„Åß„Åô„ÄÇÂÜçÂ∫¶ÈÅ∏Êäû„Åó„Å¶„Åè„Å†„Åï„ÅÑ„ÄÇ',
                en: 'Invalid menu number. Please select again.',
                ne: '‡§Ö‡§µ‡•à‡§ß ‡§Æ‡•á‡§®‡•Å ‡§®‡§Æ‡•ç‡§¨‡§∞‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§´‡•á‡§∞‡§ø ‡§õ‡§æ‡§®‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç‡•§'
            };
            addBotMessage(invalidMenuMessages[currentLanguage] || invalidMenuMessages.vi);
        }

        // „ÉÜ„Ç≠„Çπ„ÉàÂÖ•Âäõ„ÅÆÂá¶ÁêÜ
        function handleTextInput(text) {
            addUserMessage(text);
            
            // „Ç≠„Éº„ÉØ„Éº„Éâ„Éû„ÉÉ„ÉÅ„É≥„Ç∞ÔºàÁ∞°ÊòìÁâàÔºâ
            const lowerText = text.toLowerCase();
            const lang = languages[currentLanguage];
            
            // Â§öË®ÄË™û„Ç≠„Éº„ÉØ„Éº„Éâ„Éû„ÉÉ„ÉÅ„É≥„Ç∞
            const salaryKeywords = {
                vi: ['l∆∞∆°ng', 'b·∫£ng l∆∞∆°ng', 'ti·ªÅn l∆∞∆°ng', 's·ªï l∆∞∆°ng'],
                ja: ['Áµ¶‰∏é', 'Áµ¶‰∏éÊòéÁ¥∞', 'Ë≥ÉÈáë', 'Ë≥ÉÈáëÂè∞Â∏≥'],
                en: ['salary', 'payslip', 'wage', 'pay'],
                ne: ['‡§§‡§≤‡§¨', '‡§§‡§≤‡§¨‡§ï‡•ã ‡§¨‡§ø‡§≤', '‡§µ‡•á‡§§‡§®']
            };
            const visaKeywords = {
                vi: ['visa', 'th·∫ª c∆∞ tr√∫', 'gia h·∫°n'],
                ja: ['„Éì„Ç∂', 'Âú®Áïô„Ç´„Éº„Éâ', 'Êõ¥Êñ∞'],
                en: ['visa', 'residence card', 'renewal'],
                ne: ['‡§≠‡§ø‡§∏‡§æ', '‡§®‡§ø‡§µ‡§æ‡§∏ ‡§ï‡§æ‡§∞‡•ç‡§°', '‡§®‡§µ‡•Ä‡§ï‡§∞‡§£']
            };
            const attendanceKeywords = {
                vi: ['ngh·ªâ', 'mu·ªôn', 'ch·∫•m c√¥ng', 'v·∫Øng m·∫∑t'],
                ja: ['Ê¨†Âã§', 'ÈÅÖÂàª', 'Âá∫Âã§', '‰ºë„Åø'],
                en: ['absence', 'late', 'attendance', 'absent'],
                ne: ['‡§Ö‡§®‡•Å‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø', '‡§¢‡§ø‡§≤‡•ã', '‡§â‡§™‡§∏‡•ç‡§•‡§ø‡§§‡§ø']
            };
            const shiftKeywords = {
                vi: ['ca', 'ca l√†m vi·ªác', 'thay ƒë·ªïi ca'],
                ja: ['„Ç∑„Éï„Éà', '„Ç∑„Éï„ÉàÂ§âÊõ¥', 'Âä¥ÂÉçÊôÇÈñì'],
                en: ['shift', 'work shift', 'change shift'],
                ne: ['‡§ï‡§æ‡§Æ‡§ï‡•ã ‡§∏‡§Æ‡§Ø', '‡§∂‡§ø‡§´‡•ç‡§ü']
            };
            const systemKeywords = {
                vi: ['cms', 'ƒëƒÉng nh·∫≠p', 'm·∫≠t kh·∫©u', 'h·ªá th·ªëng'],
                ja: ['cms', '„É≠„Ç∞„Ç§„É≥', '„Éë„Çπ„ÉØ„Éº„Éâ', '„Ç∑„Çπ„ÉÜ„É†'],
                en: ['cms', 'login', 'password', 'system'],
                ne: ['cms', '‡§≤‡§ó‡§á‡§®', '‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°', '‡§™‡•ç‡§∞‡§£‡§æ‡§≤‡•Ä']
            };
            
            const keywords = {
                salary: salaryKeywords[currentLanguage] || salaryKeywords.vi,
                visa: visaKeywords[currentLanguage] || visaKeywords.vi,
                attendance: attendanceKeywords[currentLanguage] || attendanceKeywords.vi,
                shift: shiftKeywords[currentLanguage] || shiftKeywords.vi,
                system: systemKeywords[currentLanguage] || systemKeywords.vi
            };
            
            if (keywords.salary.some(kw => lowerText.includes(kw))) {
                selectMenuItem('salary', 0);
            } else if (keywords.visa.some(kw => lowerText.includes(kw))) {
                selectMenuItem('visa', 0);
            } else if (keywords.attendance.some(kw => lowerText.includes(kw))) {
                selectMenuItem('attendance', 0);
            } else if (keywords.shift.some(kw => lowerText.includes(kw))) {
                selectMenuItem('shift', 0);
            } else if (keywords.system.some(kw => lowerText.includes(kw))) {
                selectMenuItem('system', 0);
            } else {
                const notUnderstandMessages = {
                    vi: 'Xin l·ªói, t√¥i kh√¥ng hi·ªÉu c√¢u h·ªèi c·ªßa b·∫°n. Vui l√≤ng ch·ªçn t·ª´ menu ho·∫∑c li√™n h·ªá v·ªõi ƒëi·ªÅu ph·ªëi vi√™n.',
                    ja: 'Áî≥„ÅóË®≥„Åî„Åñ„ÅÑ„Åæ„Åõ„Çì„Åå„ÄÅ„ÅîË≥™Âïè„ÇíÁêÜËß£„Åß„Åç„Åæ„Åõ„Çì„Åß„Åó„Åü„ÄÇ„É°„Éã„É•„Éº„Åã„ÇâÈÅ∏Êäû„Åô„Çã„Åã„ÄÅ„Ç≥„Éº„Éá„Ç£„Éç„Éº„Çø„Éº„Å´„ÅäÂïè„ÅÑÂêà„Çè„Åõ„Åè„Å†„Åï„ÅÑ„ÄÇ',
                    en: 'Sorry, I do not understand your question. Please select from the menu or contact the coordinator.',
                    ne: '‡§Æ‡§æ‡§´ ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç, ‡§Æ ‡§§‡§™‡§æ‡§à‡§Ç‡§ï‡•ã ‡§™‡•ç‡§∞‡§∂‡•ç‡§® ‡§¨‡•Å‡§ù‡•ç‡§® ‡§∏‡§ï‡•ç‡§¶‡§ø‡§®‡•§ ‡§ï‡•É‡§™‡§Ø‡§æ ‡§Æ‡•á‡§®‡•Å‡§¨‡§æ‡§ü ‡§õ‡§æ‡§®‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç ‡§µ‡§æ ‡§∏‡§Æ‡§®‡•ç‡§µ‡§Ø‡§ï‡§≤‡§æ‡§à ‡§∏‡§Æ‡•ç‡§™‡§∞‡•ç‡§ï ‡§ó‡§∞‡•ç‡§®‡•Å‡§π‡•ã‡§∏‡•ç‡•§'
                };
                addBotMessage(notUnderstandMessages[currentLanguage] || notUnderstandMessages.vi);
            }
        }

        // Enter„Ç≠„Éº„ÅßÈÄÅ‰ø°
        document.getElementById('chatInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                handleInput();
            }
        });

        // ÂàùÊúüÂåñ
        updateLanguage();
    </script>
</body>
</html>
